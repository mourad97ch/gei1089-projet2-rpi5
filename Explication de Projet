Projet Linux embarquÃ© â€“ Raspberry Pi 5 (Buildroot)
1. Objectif du projet

  Ce projet consiste Ã  construire une image Linux embarquÃ©e pour Raspberry Pi 5 Ã  lâ€™aide de Buildroot.
Le systÃ¨me final doit :

* booter correctement sur le Raspberry Pi 5,

* crÃ©er un point dâ€™accÃ¨s WiFi,

* fournir un service DHCP/DNS,

* hÃ©berger un broker MQTT local,

* permettre un accÃ¨s SSH,

* lancer automatiquement une application graphique PyQt5 fournie,

* afficher un splash screen personnalisÃ© au dÃ©marrage.

@@@@ Seuls les rÃ©pertoires etc/ et usr/bin/ sont fournis. @@@@
âœï¸ Lâ€™ensemble de lâ€™infrastructure systÃ¨me doit Ãªtre construit par Nous.

2. Organisation gÃ©nÃ©rale du systÃ¨me Linux

Linux utilise une hiÃ©rarchie de rÃ©pertoires standard, chaque rÃ©pertoire a un rÃ´le prÃ©cis.

Dans ce projet, deux rÃ©pertoires sont fournis par lâ€™enseignant :

ğŸ“Œ 2.1 /etc â€“ Configuration du systÃ¨me

Le rÃ©pertoire /etc contient uniquement des fichiers de configuration et des scripts de dÃ©marrage.

Dans ce projet, /etc contient :

   * init.d/

   * S40network : script de dÃ©marrage du rÃ©seau (WiFi, DHCP, MQTT)

   * S57app : script de dÃ©marrage automatique de lâ€™application PyQt5

   * hostapd/hostapd.config : configuration du point dâ€™accÃ¨s WiFi

   * dnsmasq.conf : configuration DHCP/DNS

   * mosquitto/mosquitto.conf : configuration du broker MQTT

   * network/interfaces : configuration rÃ©seau statique de lâ€™interface WiFi

ğŸ‘‰ RÃ´le de /etc :
DÃ©finir le comportement du systÃ¨me (rÃ©seau, services, dÃ©marrage).

2.2 /usr/bin â€“ Programmes utilisateur

Le rÃ©pertoire /usr/bin contient les exÃ©cutables et applications.

Dans ce projet :

TankApp : application graphique PyQt5 fournie

ğŸ‘‰ RÃ´le de /usr/bin :
Contenir les programmes qui seront exÃ©cutÃ©s par lâ€™utilisateur ou automatiquement au dÃ©marrage.

3. Pourquoi seuls etc/ et usr/bin/ sont fournis ?

Lâ€™enseignant fournit uniquement :

la configuration (etc/)

lâ€™application (usr/bin/TankApp)

Il ne fournit aucune infrastructure systÃ¨me.

Cela oblige lâ€™Ã©tudiant Ã  :

comprendre quels services sont nÃ©cessaires,

identifier les paquets Buildroot requis,

construire un systÃ¨me Linux complet capable dâ€™exÃ©cuter ces fichiers.

Câ€™est lâ€™objectif pÃ©dagogique principal du projet :
ğŸ‘‰ dÃ©duire les dÃ©pendances et construire le systÃ¨me autour de la configuration fournie.

4. Autres rÃ©pertoires nÃ©cessaires (non fournis)

Les rÃ©pertoires suivants sont indispensables au fonctionnement de Linux, mais ne sont pas fournis manuellement.
Ils sont gÃ©nÃ©rÃ©s automatiquement par Buildroot.

RÃ©pertoires systÃ¨me essentiels

/bin : commandes de base (sh, ls, cp, etc.)

/sbin : commandes systÃ¨me (rÃ©seau, reboot, etc.)

/lib, /lib64 : bibliothÃ¨ques partagÃ©es

/usr/lib : bibliothÃ¨ques Qt, Python, PyQt5

/usr/share : donnÃ©es non exÃ©cutables (images, splash screen)

/dev : pÃ©riphÃ©riques matÃ©riels (WiFi, framebuffer, carte SD)

/proc : interface noyau

/sys : informations matÃ©rielles

/tmp : fichiers temporaires

/var : fichiers temporaires et logs des services

ğŸ‘‰ Ces rÃ©pertoires ne sont pas crÃ©Ã©s Ã  la main.
ğŸ‘‰ Ils sont gÃ©nÃ©rÃ©s par Buildroot selon les paquets activÃ©s.

5. IntÃ©gration via overlay

Les fichiers fournis sont intÃ©grÃ©s au systÃ¨me via un overlay Buildroot :

overlay/
 â”œâ”€â”€ etc/
 â”‚   â”œâ”€â”€ init.d/
 â”‚   â”‚   â”œâ”€â”€ S40network
 â”‚   â”‚   â””â”€â”€ S57app
 â”‚   â”œâ”€â”€ hostapd/hostapd.config
 â”‚   â”œâ”€â”€ mosquitto/mosquitto.conf
 â”‚   â”œâ”€â”€ dnsmasq.conf
 â”‚   â””â”€â”€ network/interfaces
 â””â”€â”€ usr/
     â””â”€â”€ bin/
         â””â”€â”€ TankApp


Ce rÃ©pertoire est rÃ©fÃ©rencÃ© dans Buildroot via :

System configuration
â†’ Root filesystem overlay directories
â†’ overlay


Lors de la compilation, Buildroot copie automatiquement ces fichiers dans le systÃ¨me final.

6. DÃ©marrage automatique

Le systÃ¨me utilise BusyBox init et les scripts /etc/init.d.

S40network :

configure lâ€™interface WiFi en mode Access Point,

lance hostapd, dnsmasq et mosquitto.

S57app :

lance automatiquement lâ€™application PyQt5 TankApp.

Les scripts sont exÃ©cutÃ©s automatiquement au boot selon leur ordre (Sxx).

7. Splash screen personnalisÃ©

Aucun splash screen nâ€™est fourni.

Lâ€™Ã©tudiant doit :

crÃ©er une image personnalisÃ©e (PNG),

lâ€™intÃ©grer dans /usr/share/,

Ã©crire un script de dÃ©marrage (ex. S05splash) pour afficher lâ€™image trÃ¨s tÃ´t au boot.

La mÃ©thode est libre (framebuffer, fbv, psplash, etc.).

8. RÃ´le de Buildroot

Buildroot est utilisÃ© pour :

gÃ©nÃ©rer le noyau Linux,

construire le root filesystem,

intÃ©grer les bibliothÃ¨ques (Qt, Python),

installer les services rÃ©seau,

assembler une image bootable pour Raspberry Pi 5.

Lâ€™Ã©tudiant ne construit pas Linux manuellement, mais dÃ©crit ce quâ€™il veut, et Buildroot le gÃ©nÃ¨re.

9. Conclusion

etc/ dÃ©finit comment le systÃ¨me se comporte

usr/bin/ contient ce que le systÃ¨me exÃ©cute

Buildroot construit tout le reste

Lâ€™Ã©tudiant est responsable de :

lâ€™analyse des fichiers fournis,

lâ€™identification des dÃ©pendances,

lâ€™intÃ©gration complÃ¨te du systÃ¨me.

Ce projet reproduit une situation rÃ©elle de Linux embarquÃ© industriel.
